/* ============================================
   Bundled Fonts (local, no network dependency)
   ============================================ */

/* Orbitron - variable weight (400-700) */
@font-face {
  font-family: 'Orbitron';
  font-style: normal;
  font-weight: 400 700;
  font-display: swap;
  src: url('./fonts/Orbitron.woff2') format('woff2');
}

/* Rajdhani */
@font-face {
  font-family: 'Rajdhani';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url('./fonts/Rajdhani-Light.woff2') format('woff2');
}
@font-face {
  font-family: 'Rajdhani';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('./fonts/Rajdhani-Regular.woff2') format('woff2');
}
@font-face {
  font-family: 'Rajdhani';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('./fonts/Rajdhani-Medium.woff2') format('woff2');
}
@font-face {
  font-family: 'Rajdhani';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('./fonts/Rajdhani-SemiBold.woff2') format('woff2');
}
@font-face {
  font-family: 'Rajdhani';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('./fonts/Rajdhani-Bold.woff2') format('woff2');
}

/* JetBrains Mono - variable weight (400-500) */
@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400 500;
  font-display: swap;
  src: url('./fonts/JetBrainsMono.woff2') format('woff2');
}

/* ============================================
   Theme Variables
   ============================================ */

:root,
[data-theme='stellaris-cyan'] {
  --color-bg-primary: 5 8 13;
  --color-bg-secondary: 12 18 25;
  --color-bg-tertiary: 20 28 40;
  --color-bg-elevated: 26 37 53;
  --color-bg-glass: 12 18 25;
  --color-bg-glass-dark: 5 8 13;

  --color-text-primary: 232 244 248;
  --color-text-secondary: 122 140 153;
  --color-text-accent: 79 209 197;
  --color-text-muted: 74 85 104;

  --color-accent-cyan: 0 212 255;
  --color-accent-cyan-dim: 0 168 204;
  --color-accent-teal: 79 209 197;
  --color-accent-teal-dim: 56 178 172;
  --color-accent-green: 72 187 120;
  --color-accent-yellow: 236 201 75;
  --color-accent-yellow-dim: 214 158 46;
  --color-accent-orange: 237 137 54;
  --color-accent-red: 252 129 129;
  --color-accent-red-dim: 245 101 101;
  --color-accent-purple: 159 122 234;
  --color-accent-blue: 66 153 225;
  --color-accent-blue-hover: 49 130 206;

  --color-border-default: 30 58 95;
  --color-border-subtle: 22 42 69;
  --color-border-glow: 0 212 255;
  --color-border-active: 79 209 197;
  --color-border-glass: 255 255 255;

  --color-discord: 88 101 242;
  --color-discord-hover: 71 82 196;
  --theme-logo-filter: none;
  --theme-scanline-alpha: 0.015;
  --theme-vignette-alpha: 0.8;
  --theme-hud-scanline-opacity: 0.1;
  --theme-stars-opacity: 0.3;
  --theme-grid-opacity: 0.2;
}

:root[data-theme='tactica-green'],
[data-theme='tactica-green'] {
  --color-bg-primary: 5 7 5;
  --color-bg-secondary: 9 14 9;
  --color-bg-tertiary: 15 23 15;
  --color-bg-elevated: 21 31 21;
  --color-bg-glass: 9 14 9;
  --color-bg-glass-dark: 5 7 5;

  --color-text-primary: 238 255 236;
  --color-text-secondary: 154 196 153;
  --color-text-accent: 124 255 91;
  --color-text-muted: 104 136 103;

  --color-accent-cyan: 124 255 91;
  --color-accent-cyan-dim: 81 198 58;
  --color-accent-teal: 84 224 125;
  --color-accent-teal-dim: 56 173 94;
  --color-accent-green: 139 255 120;
  --color-accent-yellow: 224 195 100;
  --color-accent-yellow-dim: 183 152 73;
  --color-accent-orange: 222 151 89;
  --color-accent-red: 245 121 121;
  --color-accent-red-dim: 214 95 95;
  --color-accent-purple: 158 156 220;
  --color-accent-blue: 112 196 142;
  --color-accent-blue-hover: 92 170 120;

  --color-border-default: 44 83 44;
  --color-border-subtle: 30 56 30;
  --color-border-glow: 124 255 91;
  --color-border-active: 84 224 125;
  --color-border-glass: 204 255 204;
  --theme-logo-filter: hue-rotate(70deg) saturate(1.25) brightness(1.05);
  --theme-scanline-alpha: 0.008;
  --theme-vignette-alpha: 0.66;
  --theme-hud-scanline-opacity: 0.06;
  --theme-stars-opacity: 0.18;
  --theme-grid-opacity: 0.11;
}

:root[data-theme='command-amber'],
[data-theme='command-amber'] {
  --color-bg-primary: 11 9 6;
  --color-bg-secondary: 18 14 8;
  --color-bg-tertiary: 29 22 13;
  --color-bg-elevated: 37 28 16;
  --color-bg-glass: 18 14 8;
  --color-bg-glass-dark: 11 9 6;

  --color-text-primary: 255 249 238;
  --color-text-secondary: 204 180 150;
  --color-text-accent: 255 200 87;
  --color-text-muted: 146 122 94;

  --color-accent-cyan: 255 200 87;
  --color-accent-cyan-dim: 209 143 42;
  --color-accent-teal: 246 176 82;
  --color-accent-teal-dim: 201 135 61;
  --color-accent-green: 122 197 124;
  --color-accent-yellow: 255 216 128;
  --color-accent-yellow-dim: 212 166 74;
  --color-accent-orange: 239 152 72;
  --color-accent-red: 244 133 118;
  --color-accent-red-dim: 207 102 88;
  --color-accent-purple: 184 143 222;
  --color-accent-blue: 124 165 210;
  --color-accent-blue-hover: 102 140 181;

  --color-border-default: 96 70 34;
  --color-border-subtle: 67 49 25;
  --color-border-glow: 255 200 87;
  --color-border-active: 233 164 64;
  --color-border-glass: 255 243 224;
  --theme-logo-filter: hue-rotate(210deg) saturate(1.1) brightness(1.05);
  --theme-scanline-alpha: 0.01;
  --theme-vignette-alpha: 0.7;
  --theme-hud-scanline-opacity: 0.08;
  --theme-stars-opacity: 0.22;
  --theme-grid-opacity: 0.13;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Base Styles
   ============================================ */

@layer base {
  body {
    @apply font-sans bg-bg-primary text-text-primary leading-normal text-base;
  }

  /* Subtle scanline overlay for entire app */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgb(var(--color-accent-cyan) / var(--theme-scanline-alpha, 0.015)) 2px,
      rgb(var(--color-accent-cyan) / var(--theme-scanline-alpha, 0.015)) 4px
    );
    z-index: 9999;
  }
}

/* Readability tuning for advisor + chronicle body copy on non-cyan themes. */
[data-theme='tactica-green'] .advisor-body-copy,
[data-theme='command-amber'] .advisor-body-copy {
  color: rgb(var(--color-text-primary) / 0.98);
}

[data-theme='tactica-green'] .chronicle-narrative,
[data-theme='command-amber'] .chronicle-narrative {
  color: rgb(var(--color-text-primary) / 0.99);
}

/* ============================================
   Platform-specific Styles (Electron)
   ============================================ */

.title-bar-drag-region {
  -webkit-app-region: drag;
}

.title-bar-drag-region button,
.title-bar-drag-region a,
.title-bar-drag-region input,
.title-bar-drag-region select {
  -webkit-app-region: no-drag;
}

.platform-mac .status-bar {
  padding-left: 80px;
  padding-top: 8px;
}

.platform-mac .hud-corner-top {
  top: 48px;
}

/* ============================================
   Stellaris UI Components
   ============================================ */

@layer components {
  /* Panel with corner accents - Stellaris-style chrome */
  .stellaris-panel {
    @apply relative bg-bg-secondary border border-border rounded-lg overflow-hidden;
    background: linear-gradient(180deg, rgb(var(--color-accent-cyan) / 0.03) 0%, transparent 30%);
  }

  .stellaris-panel::before,
  .stellaris-panel::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    border: 1px solid theme('colors.accent.cyan');
    opacity: 0.4;
    pointer-events: none;
  }

  .stellaris-panel::before {
    top: -1px;
    left: -1px;
    border-right: none;
    border-bottom: none;
    border-radius: 6px 0 0 0;
  }

  .stellaris-panel::after {
    bottom: -1px;
    right: -1px;
    border-left: none;
    border-top: none;
    border-radius: 0 0 6px 0;
  }

  /* Energy border that glows subtly */
  .energy-border {
    @apply relative border border-border;
    box-shadow: inset 0 0 20px rgb(var(--color-accent-cyan) / 0.05);
  }

  .energy-border::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    background: linear-gradient(
      135deg,
      rgb(var(--color-accent-cyan) / 0.2) 0%,
      transparent 50%,
      rgb(var(--color-accent-teal) / 0.2) 100%
    );
    opacity: 0.3;
    pointer-events: none;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
    padding: 1px;
  }

  /* Animated energy line - horizontal accent */
  .energy-line {
    @apply h-px w-full relative overflow-hidden;
    background: linear-gradient(90deg, transparent, theme('colors.border.DEFAULT'), transparent);
  }

  .energy-line::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent 0%, theme('colors.accent.cyan') 50%, transparent 100%);
    background-size: 200% 100%;
    animation: energy-flow 3s linear infinite;
  }

  /* Status indicator with glow */
  .status-glow {
    @apply relative;
  }

  .status-glow::after {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 50%;
    background: inherit;
    filter: blur(4px);
    opacity: 0.6;
    z-index: -1;
  }

  /* Markdown content in chat messages */
  .markdown-content h1,
  .markdown-content h2,
  .markdown-content h3,
  .markdown-content h4 {
    @apply mt-4 mb-2 font-semibold text-text-primary;
  }

  .markdown-content h1:first-child,
  .markdown-content h2:first-child,
  .markdown-content h3:first-child,
  .markdown-content h4:first-child {
    @apply mt-0;
  }

  .markdown-content h3 {
    @apply text-[15px];
  }

  .markdown-content h4 {
    @apply text-sm;
  }

  .markdown-content p {
    @apply my-2;
  }

  .markdown-content p:first-child {
    @apply mt-0;
  }

  .markdown-content p:last-child {
    @apply mb-0;
  }

  .markdown-content strong {
    @apply font-semibold text-accent-teal;
  }

  .markdown-content em {
    @apply italic;
  }

  .markdown-content ul,
  .markdown-content ol {
    @apply my-2 pl-5;
  }

  .markdown-content li {
    @apply my-1;
  }

  .markdown-content code {
    @apply bg-bg-tertiary px-1.5 py-0.5 rounded font-mono text-[13px] text-accent-cyan;
  }

  .markdown-content pre {
    @apply bg-bg-tertiary p-3 rounded-md overflow-x-auto my-2 border border-border;
  }

  .markdown-content pre code {
    @apply bg-transparent p-0;
  }

  .markdown-content blockquote {
    @apply border-l-[3px] border-accent-teal pl-3 my-2 text-text-secondary italic;
  }

  /* Chronicle narrative content */
  .chronicle-narrative strong {
    @apply text-accent-cyan font-semibold;
  }

  .chronicle-narrative em {
    @apply italic;
  }

  .chronicle-narrative q {
    @apply italic text-text-secondary;
  }

  .chronicle-narrative q::before {
    content: '"';
  }

  .chronicle-narrative q::after {
    content: '"';
  }

  /* Chronicle structured section styles */
  .chronicle-drop-cap::first-letter {
    font-size: 3.5em;
    float: left;
    line-height: 0.8;
    padding-right: 0.1em;
    margin-top: 0.05em;
    color: theme('colors.accent.cyan');
    font-family: theme('fontFamily.display');
  }
}

/* ============================================
   Keyframe Animations
   ============================================ */

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.4;
  }
}

@keyframes bounce {
  0%, 80%, 100% {
    transform: scale(0.6);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes energy-flow {
  0% {
    background-position: 200% center;
  }
  100% {
    background-position: -200% center;
  }
}

@keyframes highlight-flash {
  0% {
    box-shadow: 0 0 0 2px theme('colors.accent.cyan'), 0 0 20px rgb(var(--color-accent-cyan) / 0.4);
    background: linear-gradient(135deg, theme('colors.bg.secondary') 0%, rgb(var(--color-accent-cyan) / 0.1) 100%);
  }
  100% {
    box-shadow: none;
    background: theme('colors.bg.secondary');
  }
}

/* ============================================
   Utility Classes for Animations
   ============================================ */

@layer utilities {
  .animate-pulse-status {
    animation: pulse 2s infinite;
  }

  .animate-bounce-dot {
    animation: bounce 1.4s infinite ease-in-out both;
  }

  .animate-bounce-dot-1 {
    animation-delay: -0.32s;
  }

  .animate-bounce-dot-2 {
    animation-delay: -0.16s;
  }

  .animate-bounce-dot-3 {
    animation-delay: 0s;
  }

  .animate-spin-loader {
    animation: spin 1s linear infinite;
  }

  .animate-fade-in {
    animation: fadeIn 0.2s ease-in;
  }

  .animate-highlight-flash {
    animation: highlight-flash 2s ease-out;
  }

  .animate-pulse-text {
    animation: pulse 2s ease-in-out infinite;
  }

  /* Text glow effect */
  .text-glow {
    text-shadow: 0 0 10px currentColor;
  }

  .text-glow-sm {
    text-shadow: 0 0 5px currentColor;
  }
}

/* ============================================
   Scrollbar Styling - Stellaris Theme
   ============================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: theme('colors.bg.primary');
}

::-webkit-scrollbar-thumb {
  background: theme('colors.border.DEFAULT');
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: theme('colors.accent.cyan-dim');
}

/* Composer scrollbar: keep right-side behavior, but make it subtle and lightweight */
.composer-scrollbar {
  direction: ltr;
  scrollbar-width: thin;
  scrollbar-color: rgb(var(--color-accent-cyan) / 0.45) transparent;
  scrollbar-gutter: stable;
}

.composer-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.composer-scrollbar::-webkit-scrollbar-track {
  background: transparent;
  margin: 8px 0 52px;
}

.composer-scrollbar::-webkit-scrollbar-thumb {
  border-radius: 999px;
  background: rgb(var(--color-accent-cyan) / 0.22);
}

.composer-scrollbar:hover::-webkit-scrollbar-thumb,
.composer-scrollbar:focus::-webkit-scrollbar-thumb {
  background: rgb(var(--color-accent-cyan) / 0.52);
}

/* ============================================
   Selection Styling
   ============================================ */

::selection {
  background: rgb(var(--color-accent-cyan) / 0.3);
  color: theme('colors.text.primary');
}
